<!doctype html>
<html lang="zh-TW">
Â <head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <title>ç­ç´šäº¤æ›æŠ½ç±¤å·¥å…·</title>
  Â  <style>
Â  Â  body {
Â  Â  Â  box-sizing: border-box;
Â  Â  Â  margin: 0;
Â  Â  Â  padding: 0;
Â  Â  Â  font-family: 'Microsoft JhengHei', 'PingFang TC', sans-serif;
Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
Â  Â  Â  min-height: 100%;
Â  Â  Â  overflow-x: hidden;
Â  Â  }
Â  Â Â 
Â  Â  * {
Â  Â  Â  box-sizing: border-box;
Â  Â  }
Â  Â Â 
Â  Â  .container {
Â  Â  Â  max-width: 1400px;
Â  Â  Â  margin: 0 auto;
Â  Â  Â  padding: 2rem;
Â  Â  }
Â  Â Â 
Â  Â  .header {
Â  Â  Â  text-align: center;
Â  Â  Â  margin-bottom: 2rem;
Â  Â  Â  animation: fadeInDown 0.8s ease-out;
Â  Â  }
Â  Â Â 
Â  Â  .header h1 {
Â  Â  Â  color: #ffffff;
Â  Â  Â  font-size: 3rem;
Â  Â  Â  margin: 0 0 1rem 0;
Â  Â  Â  text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
Â  Â  }
Â  Â Â 
Â  Â  .header p {
Â  Â  Â  color: #e0e7ff;
Â  Â  Â  font-size: 1.2rem;
Â  Â  Â  margin: 0;
Â  Â  }
Â  Â Â 
Â  Â  .logo-container {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: center;
Â  Â  Â  margin-bottom: 2rem;
Â  Â  }
Â  Â Â 
Â  Â  .logo {
Â  Â  Â  width: 100px;
Â  Â  Â  height: 100px;
Â  Â  Â  animation: float 3s ease-in-out infinite;
Â  Â  }
Â  Â Â 
Â  Â  .control-panel {
Â  Â  Â  background: white;
Â  Â  Â  border-radius: 20px;
Â  Â  Â  padding: 2rem;
Â  Â  Â  margin-bottom: 2rem;
Â  Â  Â  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
Â  Â  Â  animation: fadeInUp 0.8s ease-out;
Â  Â  }
Â  Â Â 
Â  Â  .settings-group {
Â  Â  Â  display: flex;
Â  Â  Â  gap: 2rem;
Â  Â  Â  justify-content: center;
Â  Â  Â  margin-bottom: 2rem;
Â  Â  Â  flex-wrap: wrap;
Â  Â  }
Â  Â Â 
Â  Â  .setting-item {
Â  Â  Â  flex: 1;
Â  x Â  min-width: 200px;
Â  Â  Â  max-width: 300px;
Â  Â  }
Â  Â Â 
Â  Â  .setting-item label {
Â  Â  Â  display: block;
Â  Â  Â  margin-bottom: 0.5rem;
Â  Â  Â  color: #4a5568;
Â  Â  Â  font-weight: 600;
Â  Â  Â  font-size: 1rem;
Â  Â  }
Â  Â Â 
Â  Â  .select-input, .number-input {
Â  Â  Â  width: 100%;
Â  Â  Â  padding: 0.75rem 1rem;
Â  Â  Â  border: 2px solid #e2e8f0;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  font-weight: 600;
Â  Â  Â  color: #2d3748;
Â  Â  Â  background: white;
Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  cursor: pointer;
Â  Â  }
Â  Â Â 
Â  Â  .select-input:focus, .number-input:focus {
Â  Â  Â  outline: none;
Â  Â  Â  border-color: #667eea;
Â  Â  Â  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
Â  Â  }
Â  Â Â 
Â  Â  .number-input {
Â  Â  Â  text-align: center;
Â  Â  }
Â  Â Â 
Â  Â  .action-buttons {
Â  Â  Â  display: flex;
Â  Â  Â  gap: 1rem;
Â  Â  Â  justify-content: center;
Â  Â  }
Â  Â Â 
Â  Â  .btn {
Â  Â  Â  padding: 1rem 2.5rem;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  font-size: 1.2rem;
Â  Â  Â  font-weight: 600;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  gap: 0.5rem;
Â  Â  }
Â  Â Â 
Â  Â  .btn-primary {
Â  Â  Â  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
Â  Â  Â  color: white;
Â  Â  Â  box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
Â  Â  }
Â  Â Â 
Â  Â  .btn-primary:hover {
Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5);
Â  Â  }
Â  Â Â 
Â  Â  .btn-secondary {
Â  Â  Â  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
Â  Â  Â  color: white;
Â  Â  Â  box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
Â  Â  }
Â  Â Â 
Â  Â  .btn-secondary:hover {
Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  box-shadow: 0 6px 20px rgba(245, 158, 11, 0.5);
Â  Â  }
Â  Â Â 
Â  Â  .btn:disabled {
Â  Â  Â  opacity: 0.5;
Â  Â  Â  cursor: not-allowed;
Â  Â  Â  transform: none !important;
Â  Â  }
Â  Â Â 
Â  Â  .classes-grid {
Â  Â  Â  background: white;
Â  Â  Â  border-radius: 20px;
Â  Â  Â  padding: 2rem;
Â  Â  Â  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
Â  Â  Â  animation: fadeInUp 0.8s ease-out 0.2s both;
Â  Â  }
Â  Â Â 
Â  Â  .grid-header {
Â  Â  Â  text-align: center;
Â  Â  Â  margin-bottom: 2rem;
Â  Â  Â  padding-bottom: 1rem;
Â  Â  Â  border-bottom: 2px solid #e2e8f0;
Â  Â  }
Â  Â Â 
Â  Â  .grid-header h2 {
Â  Â  Â  color: #2d3748;
Â  Â  Â  margin: 0 0 0.5rem 0;
Â  Â  Â  font-size: 1.8rem;
Â  Â  }
Â  Â Â 
Â  Â  .grid-subtitle {
Â  Â  Â  color: #718096;
Â  Â  Â  font-size: 1rem;
Â  Â  }
Â  Â Â 
Â  Â  .class-grid {
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: repeat(4, 1fr);
Â  Â  Â  grid-template-rows: repeat(5, auto);
Â  Â  Â  grid-auto-flow: column;
Â  Â  Â  gap: 1rem;
Â  Â  Â  margin-bottom: 2rem;
Â  Â  }
Â  Â Â 
Â  Â  .class-card {
Â  Â  Â  background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
Â  Â  Â  border-radius: 12px;
Â  Â  Â  padding: 1.5rem;
Â  Â  Â  text-align: center;
Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  border: 3px solid transparent;
Â  Â  Â  position: relative;
Â  Â  Â  overflow: hidden;
Â  Â  }
Â  Â Â 
Â  Â  .class-card::before {
Â  Â  Â  content: '';
Â  Â  Â  position: absolute;
Â  Â  Â  top: 0;
Â  Â  Â  left: 0;
Â  Â  Â  right: 0;
Â  Â  Â  height: 4px;
Â  Â  Â  background: linear-gradient(90deg, #667eea, #764ba2);
Â  Â  }
Â  Â Â 
Â  Â  .class-card.swapped {
Â  Â  Â  animation: highlight 1s ease-out;
Â  Â  Â  border-color: #10b981;
Â  Â  }
Â  Â Â 
Â  Â  .position-number {
Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  color: #a0aec0;
Â  Â  Â  font-weight: 600;
Â  Â  Â  margin-bottom: 0.5rem;
Â  Â  }
Â  Â Â 
Â  Â  .class-number {
Â  Â  Â  font-size: 2.5rem;
Â  Â  Â  font-weight: 700;
Â  Â  Â  color: #2d3748;
Â  Â  Â  margin: 0.5rem 0;
Â  Â  }
Â  Â Â 
Â  Â  .arrow-indicator {
Â  Â  Â  font-size: 1.2rem;
Â  Â  Â  color: #10b981;
Â  Â  Â  margin: 0.25rem 0;
Â  Â  Â  opacity: 0;
Â  Â  Â  transition: opacity 0.3s ease;
Â  Â  }
Â  Â Â 
Â  Â  .class-card.swapped .arrow-indicator {
Â  Â  Â  opacity: 1;
Â  Â  }
Â  Â Â 
Â  Â  .original-class {
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  color: #718096;
Â  Â  Â  font-weight: 500;
Â  Â  }
Â  Â Â 
Â  Â  .history-section {
Â  Â  Â  background: white;
Â  _x000D_Â  Â  Â  border-radius: 20px;
Â  Â  Â  padding: 2rem;
Â  Â  Â  margin-top: 2rem;
Â  Â  Â  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
Â  Â  Â  animation: fadeInUp 0.8s ease-out 0.4s both;
Â  Â  }
Â  Â Â 
Â  Â  .history-header {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  Â  margin-bottom: 1.5rem;
Â  Â  Â  padding-bottom: 1rem;
Â  Â  Â  border-bottom: 2px solid #e2e8f0;
Â  Â  }
Â  Â Â 
Â  Â  .history-header h3 {
Â  Â  Â  color: #2d3748;
Â  Â  Â  margin: 0;
Â  Â  Â  font-size: 1.5rem;
Â  Â  }
Â  Â Â 
Â  Â  .history-count {
Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
Â  Â  Â  color: white;
Â  Â  Â  padding: 0.5rem 1rem;
Â  Â  Â  border-radius: 20px;
Â  Â  Â  font-weight: 600;
Â  Â  Â  font-size: 0.9rem;
Â  Â  }
Â  Â Â 
Â  Â  .history-list {
Â  Â  Â  max-height: 500px;
Â  Â  Â  overflow-y: auto;
Â  Â  }
Â  Â Â 
Â  Â  .history-item {
Â  Â  Â  background: #f7fafc;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  margin-bottom: 1.5rem;
Â  Â  Â  overflow: hidden;
Â  Â  Â  border: 2px solid #e2e8f0;
Â  Â  }
Â  Â Â 
Â  Â  .history-item-header {
Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
Â  Â  Â  color: white;
Â  Â  Â  padding: 0.75rem 1rem;
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  Â  font-weight: 600;
Â  Â  }
Â  Â Â 
Â  Â  .history-time {
Â  Â  Â  color: #e0e7ff;
Â  Â  Â  font-size: 0.85rem;
Â  Â  }
Â  Â Â 
Â  Â  .history-table-container {
Â  Â  Â  padding: 1rem;
Â  Â  Â  overflow-x: auto;
Â  Â  }
Â  Â Â 
Â  Â  .history-table {
Â  Â  Â  width: 100%;
Â  Â  Â  border-collapse: collapse;
Â  Â  Â  font-size: 0.9rem;
Â  Â  }
Â  Â Â 
Â  Â  .history-table thead {
Â  Â  Â  background: #edf2f7;
Â  Â  }
Â  Â Â 
Â  Â  .history-table th {
Â  Â  Â  padding: 0.75rem 0.5rem;
Â  Â  Â  text-align: center;
Â  Â  Â  font-weight: 600;
Â  Â  Â  color: #4a5568;
Â  Â  Â  border-bottom: 2px solid #cbd5e0;
Â  Â  }
Â  Â Â 
Â  Â  .history-table td {
Â  Â  Â  padding: 0.6rem 0.5rem;
Â  Â  Â  text-align: center;
Â  Â  Â  border-bottom: 1px solid #e2e8f0;
Â  Â  Â  color: #2d3748;
Â  Â  }
_x000D_Â  Â Â 
Â  Â  .history-table tbody tr:hover {
Â  Â  Â  background: #f7fafc;
Â  Â  }
Â  Â Â 
Â  Â  .history-table tbody tr:last-child td {
Â  Â  Â  border-bottom: none;
Â  Â  }
Â  Â Â 
Â  Â  .arrow-cell {
Â  Â  Â  color: #10b981;
S Â  Â  font-weight: 700;
Â  Â  Â  font-size: 1.1rem;
Â  Â  }
Â  Â Â 
Â  Â  .class-cell {
Â  Â  Â  font-weight: 600;
Â  Â  Â  font-size: 1rem;
Â  Â  }
Â  Â Â 
Â  Â  .position-cell {
Â  Â  Â  color: #718096;
Â  Â  Â  font-weight: 500;
Â  Â  }
Â  Â Â 
Â  Â  .empty-history {
Â  Â  Â  text-align: center;
Â  Â  Â  padding: 2rem;
Â  Â  Â  color: #a0aec0;
Â  Â  }
Â  Â Â 
Â  Â  .loading {
Â  Â  Â  display: inline-block;
Â  Â  Â  width: 20px;
Â  Â  Â  height: 20px;
Â  Â  Â  border: 3px solid rgba(255,255,255,0.3);
Â  Â  Â  border-radius: 50%;
Â  Â  Â  border-top-color: white;
Â  Â  Â  animation: spin 0.8s linear infinite;
Â  Â  }
Â  Â Â 
Â  Â  .toast {
Â  Â  Â  position: fixed;
Â  Â  Â  top: 20px;
Â  Â  Â  right: 20px;
Â  Â  Â  padding: 1rem 1.5rem;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
Â  Â  Â  z-index: 1000;
Â  Â  Â  font-weight: 600;
Â  Â  Â  animation: slideInRight 0.3s ease-out;
Â  Â  }
Â  Â Â 
Â  Â  .toast.success {
Â  Â  Â  background: #10b981;
Â  Â  Â  color: white;
Â  Â  }
Â  Â Â 
Â  Â  .toast.error {
Â  Â  Â  background: #ef4444;
Â  Â  Â  color: white;
Â  Â  }
Â  Â Â 
Â  Â  @keyframes fadeInDown {
Â  Â  Â  from {
Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  transform: translateY(-30px);
Â  Â  Â  }
Â  Â  Â  to {
Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  transform: translateY(0);
Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  @keyframes fadeInUp {
Â  Â  Â  from {
Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  transform: translateY(30px);
Â  Â  Â  }
Â  Â  Â  to {
Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  transform: translateY(0);
Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  @keyframes float {
Â  Â  Â  0%, 100% {
Â  Â  Â  Â  transform: translateY(0);
}
Â  Â  Â  50% {
Â  Â  Â  Â  transform: translateY(-20px);
Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  @keyframes spin {
Â  Â  Â  to {
Â  Â  Â  Â  transform: rotate(360deg);
Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  @keyframes highlight {
Â  Â  Â  0%, 100% {
Â  Â  Â  Â  background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
Â  Â  Â  }
Â  Â  Â  50% {
Â  Â  Â  Â  background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
A Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  @keyframes slideInRight {
Â  Â  Â  from {
Â  Â  Â  Â  transform: translateX(400px);
Â  Â  Â  Â  opacity: 0;
Â  Â  Â  }
Â  Â  Â  to {
Â  Â  Â  Â  transform: translateX(0);
Â  Â  Â  Â  opacity: 1;
Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  @media (max-width: 1200px) {
Â  Â  Â  .class-grid {
Â  Â  Â  Â  grid-template-columns: repeat(3, 1fr);
Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  @media (max-width: 768px) {
Â  Â  Â  .header h1 {
Â  Â  Â  Â  font-size: 2rem;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  .class-grid {
Â  Â  Â  Â  grid-template-columns: repeat(2, 1fr);
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  .settings-group {
Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  .setting-item {
Â  Â  Â  Â  max-width: 100%;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  .action-buttons {
Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  .btn {
Â  Â  Â  Â  width: 100%;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  .history-table {
Â  Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  .history-table th,
Â  Â  Â  .history-table td {
Â  Â  Â  Â  padding: 0.5rem 0.25rem;
Â  Â  Â  }
Â  Â  }
Â  </style>
Â  <style>@view-transition { navigation: auto; }</style>
Â  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
Â </head>
Â <body>
Â  <main class="container">
Â  Â <header class="header">
Â  Â  <div class="logo-container">
Â  Â  Â <svg class="logo" viewbox="0 0 120 120" xmlns="http://www.w3.org/2000/svg"><defs>
Â  Â  Â  Â <lineargradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
Â  Â  Â  Â  <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
Â  Â  Â  Â  <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
Â  Â  Â  Â </lineargradient>
Â  Â  Â  </defs> <circle cx="60" cy="60" r="55" fill="white" opacity="0.2" /> <rect x="25" y="35" width="30" height="40" rx="5" fill="url(#grad1)" transform="rotate(-15 40 55)">
Â  Â  Â  Â <animatetransform attributename="transform" type="rotate" from="-15 40 55" to="15 40 55" dur="2s" repeatcount="indefinite" direction="alternate" />
x Â  Â  </rect> <rect x="65" y="35" width="30" height="40" rx="5" fill="#10b981" transform="rotate(15 80 55)">
Â  Â  Â  Â <animatetransform attributename="transform" type="rotate" from="15 80 55" to="-15 80 55" dur="2s" repeatcount="indefinite" direction="alternate" />
Â  Â  Â  </rect> <path d="M 45 55 Q 60 45 75 55" stroke="white" stroke-width="3" fill="none" stroke-linecap="round">
Â  Â  Â  Â <animate attributename="d" from="M 45 55 Q 60 45 75 55" to="M 45 55 Q 60 65 75 55" dur="2s" repeatcount="indefinite" direction="alternate" />
Â  Â  Â  </path>
Â  Â  Â </svg>
Â  Â  </div>
Â  Â  <h1 id="main-title">ç­ç´šäº¤æ›æŠ½ç±¤å·¥å…·</h1>
Â  Â  <p id="subtitle">éš¨æ©Ÿå°èª¿ç­ç´šä½ç½®</p>
Â  Â </header>
Â  Â <section class="control-panel">
Â  Â  <div class="settings-group">
Â  Â  Â <div class="setting-item"><label for="grade-select">é¸æ“‡å¹´ç´š</label> <select id="grade-select" class="select-input"> <option value="7">ä¸ƒå¹´ç´š</option> <option value="8">å…«å¹´ç´š</option> <option value="9">ä¹å¹´ç´š</option> </select>
Â  Â  Â </div>
Â  Â  Â <div class="setting-item"><label for="class-count">ç­ç´šæ•¸é‡</label> <input type="number" id="class-count" class="number-input" min="1" max="20" value="20">
Â  Â  Â </div>
Â  Â  </div>
Â  Â  <div class="action-buttons"><button class="btn btn-primary" id="shuffle-btn"> <span>ğŸ²</span> <span id="shuffle-btn-text">é–‹å§‹éš¨æ©Ÿå°èª¿</span> </button> <button class="btn btn-secondary" id="reset-btn"> <span>ğŸ”„</span> <span id="reset-btn-text">æ¢å¾©åŸå§‹é †åº</span> </button>
Â  Â  </div>
Â  Â </section>
Â  Â <section class="classes-grid">
Â  Â  <div class="grid-header">
Â  Â  Â <h2>ç­ç´šä½ç½®</h2>
Â  Â  Â <p class="grid-subtitle" id="grid-subtitle">ç›®å‰å…± 20 å€‹ç­ç´š</p>
Â  Â  </div>
Â  Â  <div class="class-grid" id="class-grid"></div>
Â  Â </section>
Â  Â <section class="history-section">
Â  Â  <div class="history-header">
Â  Â  Â <h3>å°èª¿è¨˜éŒ„</h3>
Â  Â  Â <div class="history-count" id="history-count">
Â  Â  Â  å…± 0 æ¬¡
Â  Â  Â </div>
Â  Â  </div>
Â  Â  <div class="history-list" id="history-list">
Â  Â  Â <div class="empty-history">
Â  Â  Â  å°šç„¡å°èª¿è¨˜éŒ„
Â  Â  Â </div>
Â  Â  </div>
Â  Â </section>
Â  </main>
Â  <script>
Â  Â  const defaultConfig = {
Â  Â  Â  main_title: 'ç­ç´šäº¤æ›æŠ½ç±¤å·¥å…·',
Â  Â  Â  subtitle: 'éš¨æ©Ÿå°èª¿ç­ç´šä½ç½®',
Â  Â  Â  shuffle_button_text: 'é–‹å§‹éš¨æ©Ÿå°èª¿',
Â  Â  Â  reset_button_text: 'æ¢å¾©åŸå§‹é †åº',
Â  Â  Â  background_color: '#667eea',
Â  Â  Â  surface_color: '#ffffff',
Â  Â  Â  text_color: '#2d3748',
Â  Â  Â  primary_action_color: '#10b981',
Â  Â  Â  secondary_action_color: '#f59e0b',
Â  Â  Â  font_family: 'Microsoft JhengHei',
Â  Â  Â  font_size: 16
Â  Â  };

Â  Â  let currentGrade = 7;
Â  Â  let currentClassCount = 20;
Â  Â  let originalClasses = [];
Â  Â  let currentClasses = [];
Â  Â  let allRecords = [];

Â  Â  function generateClasses(grade, count) {
Â  Â  Â  const classes = [];
Â  Â  Â  for (let i = 1; i <= count; i++) {
Â  Â  Â  Â  classes.push(`${grade}${String(i).padStart(2, '0')}`);
Â  Â  Â  }
Â  Â  Â  return classes;
Â  Â  }

Â  Â  function updateClasses() {
Â  Â  Â  originalClasses = generateClasses(currentGrade, currentClassCount);
Â  Â  Â  currentClasses = [...originalClasses];
Â  Â  }

Â  Â  function renderClassGrid() {
Â  Â  Â  const grid = document.getElementById('class-grid');
Â  Â  Â  const subtitle = document.getElementById('grid-subtitle');
Â  Â  Â  grid.innerHTML = '';
Â  Â  Â Â 
Â  Â  Â  const gradeText = currentGrade === 7 ? 'ä¸ƒå¹´ç´š' : currentGrade === 8 ? 'å…«å¹´ç´š' : 'ä¹å¹´ç´š';
Â  Â  Â  subtitle.textContent = `${gradeText} - å…± ${currentClassCount} å€‹ç­ç´š`;
Â  Â  Â Â 
Â  Â  Â  currentClasses.forEach((className, index) => {
Â  Â  Â  Â  const card = document.createElement('div');
Â  Â  Â  Â  card.className = 'class-card';
Â  Â  Â  Â  card.id = `class-${index}`;
Â  Â  Â  Â Â 
Â  Â  Â  Â  const isSwapped = className !== originalClasses[index];
Â  Â  Â  Â  if (isSwapped) {
Â  Â  Â  Â  Â  card.classList.add('swapped');
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  Â  <div class="position-number">ä½ç½® ${index + 1}</div>
Â  Â  Â  Â  Â  <div class="class-number">${className}</div>
Â  Â  Â  Â  Â  ${isSwapped ? `
Â  Â  Â  Â  Â  Â  <div class="arrow-indicator">â†‘</div>
Â  Â  Â  Â  Â  Â  <div class="original-class">åŸ: ${originalClasses[index]}</div>
Â  Â  Â  Â  Â  ` : ''}
Â  Â  Â  Â  `;
Â  Â  Â  Â Â 
Â  Â  Â  Â  grid.appendChild(card);
Â  Â  Â  });
Â  Â  }

Â  Â  function shuffleArray(array) {
Â  Â  Â  const n = array.length;
Â  Â  Â  const newArray = [...array];
Â  Â  Â  let attempts = 0;
Â  Â  Â  const maxAttempts = 1000;
Â  Â  Â Â 
Â  Â  Â  while (attempts < maxAttempts) {
Â  Â  Â  Â  for (let i = n - 1; i > 0; i--) {
Â  Â  Â  Â  Â  const j = Math.floor(Math.random() * (i + 1));
Â  Â  Â  Â  Â  [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  let allMoved = true;
Â  Â  Â  Â  for (let i = 0; i < n; i++) {
Â  Â  Â  Â  Â  if (newArray[i] === array[i]) {
Â  Â  Â  Â  Â  Â  allMoved = false;
Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (allMoved) {
Â  Â  Â  Â  Â  return newArray;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  attempts++;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  for (let i = 0; i < n; i++) {
Â  Â  Â  Â  newArray[i] = array[(i + 1) % n];
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  return newArray;
Â  Â  }

Â  Â  async function handleShuffle() {
Â  Â  Â  if (allRecords.length >= 999) {
Â  Â  Â  Â  showToast('å·²é”åˆ°è¨˜éŒ„ä¸Šé™ (999 ç­†)ï¼Œè«‹å…ˆæ¸…é™¤éƒ¨åˆ†è¨˜éŒ„', 'error');
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  const shuffleBtn = document.getElementById('shuffle-btn');
Â  Â  Â  shuffleBtn.disabled = true;
Â  Â  Â  shuffleBtn.innerHTML = '<span class="loading"></span><span>å°èª¿ä¸­...</span>';
Â  Â  Â Â 
Â  Â  Â  currentClasses = shuffleArray(currentClasses);
Â  Â  Â Â 
Â  Â  Â  const swaps = [];
Â  Â  Â  currentClasses.forEach((className, index) => {
Â  Â  Â  Â  swaps.push(`${index + 1}|${originalClasses[index]}|${className}`);
Â  Â  Â  });
Â  Â  Â Â 
Â  Â  Â  const gradeText = currentGrade === 7 ? 'ä¸ƒå¹´ç´š' : currentGrade === 8 ? 'å…«å¹´ç´š' : 'ä¹å¹´ç´š';
Â  Â  Â Â 
Â  Â  Â  const record = {
Â  Â  Â  Â  id: Date.now().toString() + Math.random().toString(36).substr(2, 9),
Â  Â  Â  Â  grade: gradeText,
Â  Â  Â  Â  class_count: currentClassCount,
Â  Â  Â  Â  shuffle_history: swaps.join(';;'),
Â  Â  Â  Â  timestamp: new Date().toISOString()
Â  Â  Â  };
Â  Â  Â Â 
Â  Â  Â  // --- ä¿®æ”¹é–‹å§‹ï¼šä½¿ç”¨ localStorage å„²å­˜ ---
Â  Â  Â  try {
Â  Â  Â  Â  allRecords.push(record);
Â  Â  Â  Â  localStorage.setItem('shuffleHistory', JSON.stringify(allRecords));
Â  Â  Â  Â Â 
Â  Â  Â  Â  renderHistory(allRecords); // æ‰‹å‹•è§¸ç™¼æ­·å²ç´€éŒ„æ›´æ–°
Â  Â  Â  Â  renderClassGrid();
Â  Â  Â  Â  showToast(`æˆåŠŸå°èª¿ ${currentClassCount} å€‹ç­ç´šä½ç½®`, 'success');
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  console.error('å„²å­˜å¤±æ•—:', e);
Â  Â  Â  Â  showToast('å°èª¿å¤±æ•—ï¼Œè«‹é‡è©¦', 'error');
Â  Â  Â  Â  // å¦‚æœå„²å­˜å¤±æ•—ï¼ŒæŠŠå‰›å‰›åŠ é€²å»çš„ç´€éŒ„ç§»é™¤
Â  Â  Â  Â  allRecords.pop();
Â  Â  Â  }
Â  Â  Â  // --- ä¿®æ”¹çµæŸ ---
Â  Â  Â Â 
Â  Â  Â  shuffleBtn.disabled = false;
Â  Â  Â  shuffleBtn.innerHTML = `<span>ğŸ²</span><span id="shuffle-btn-text">${defaultConfig.shuffle_button_text}</span>`;
Â  Â  }

Â  Â  function handleReset() {
Â  Â  Â  currentClasses = [...originalClasses];
Â  Â  Â  renderClassGrid();
Â  Â  Â  showToast('å·²æ¢å¾©åŸå§‹é †åº', 'success');
Â  Â  }

Â  Â  function renderHistory(data) {
Â  Â  Â  allRecords = data; // ç¢ºä¿å…¨åŸŸè®Šæ•¸åŒæ­¥
Â  Â  Â  const historyList = document.getElementById('history-list');
Â  Â  Â  const historyCount = document.getElementById('history-count');
Â  Â  Â Â 
Â  Â  Â  historyCount.textContent = `å…± ${data.length} æ¬¡`;
Â  Â  Â Â 
Â  Â  Â  if (data.length === 0) {
Â  Â  Â  Â  historyList.innerHTML = '<div class="empty-history">å°šç„¡å°èª¿è¨˜éŒ„</div>';
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  const sortedData = [...data].sort((a, b) =>Â 
Â  Â  Â  Â  new Date(b.timestamp) - new Date(a.timestamp)
Â  Â  Â  );
Â  Â  Â Â 
Â  Â  Â  historyList.innerHTML = sortedData.map(record => {
Â  Â  Â  Â  const date = new Date(record.timestamp);
Â  Â  Â  Â  const timeStr = date.toLocaleString('zh-TW', {
Â  Â  Â  Â  Â  year: 'numeric',
Â  Â  Â  Â  Â  month: '2-digit',
Â  Â  Â  Â  Â  day: '2-digit',
Â  Â  Â  Â  Â  hour: '2-digit',
Â  Â  Â  Â  Â  minute: '2-digit'
Â  Â  Â  Â  });
Â  Â  Â  Â Â 
Â  Â  Â  Â  const swaps = record.shuffle_history.split(';;');
Â  Â  Â  Â  const tableRows = swaps.map(swap => {
Â  Â  Â  Â  Â  const [position, original, newClass] = swap.split('|');
Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  Â  <td class="position-cell">ä½ç½® ${position}</td>
Â  Â  Â  Â  Â  Â  Â  <td class="class-cell">${original}</td>
Â  Â  Â  Â  Â  Â  Â  <td class="arrow-cell">â†’</td>
Â  Â  Â  Â  Â  Â  Â  <td class="class-cell">${newClass}</td>
Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }).join('');
Â  Â  Â  Â Â 
Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  <div class="history-item">
Â  Â  Â  Â  Â  Â  <div class="history-item-header">
Â  Â  Â  Â  Â  Â  Â  <span><strong>${record.grade || 'ä¸ƒå¹´ç´š'}</strong> (${record.class_count || 20}ç­)</span>
Â  Â  Â  Â  Â  Â  Â  <span class="history-time">${timeStr}</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="history-table-container">
Â  Â  Â  Â  Â  Â  Â  <table class="history-table">
Â  Â  Â  Â  Â  Â  Â  Â  <thead>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>ä½ç½®</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>åŸç­ç´š</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th></th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>æ–°ç­ç´š</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  Â  Â  </thead>
Â  Â  Â  Â  Â  Â  Â  Â  <tbody>
Â  Â  Â  Â  Â  Â  Â  Â  Â  ${tableRows}
Â  Â  Â  Â  Â  Â  Â  Â  </tbody>
Â  Â  Â  Â  Â  Â  Â  </table>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  Â  }).join('');
Â  Â  }

Â  Â  function showToast(message, type) {
Â  Â  Â  const toast = document.createElement('div');
Â  Â  Â  toast.className = `toast ${type}`;
Â  Â  Â  toast.textContent = message;
Â  Â  Â  document.body.appendChild(toast);
Â  Â  Â Â 
Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  toast.style.animation = 'slideOutRight 0.3s ease-out';
Â  Â  Â  Â  setTimeout(() => toast.remove(), 300);
Â  Â  Â  }, 3000);
Â  Â  }

Â  Â  // --- ç§»é™¤äº† dataHandler ---

Â  Â  async function onConfigChange(config) {
Â  Â  Â  const customFont = config.font_family || defaultConfig.font_family;
Â  Â  Â  const baseSize = config.font_size || defaultConfig.font_size;
Â  Â  Â  const baseFontStack = 'PingFang TC, sans-serif';
Â  Â  Â Â 
Â  Â  Â  document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
Â  Â  Â  document.body.style.background = `linear-gradient(135deg, ${config.background_color || defaultConfig.background_color} 0%, #764ba2 100%)`;
Â  Â  Â Â 
Â  Â  Â  document.getElementById('main-title').textContent = config.main_title || defaultConfig.main_title;
Â  Â  Â  document.getElementById('main-title').style.fontSize = `${baseSize * 1.875}px`;
Â  Â  Â  document.getElementById('main-title').style.color = config.surface_color || defaultConfig.surface_color;
Â  Â  Â Â 
Â  Â  Â  document.getElementById('subtitle').textContent = config.subtitle || defaultConfig.subtitle;
Â  Â  Â  document.getElementById('subtitle').style.fontSize = `${baseSize * 1.25}px`;
Â  Â  Â Â 
Â  Â  Â  document.getElementById('shuffle-btn-text').textContent = config.shuffle_button_text || defaultConfig.shuffle_button_text;
Â  Â  Â  document.getElementById('reset-btn-text').textContent = config.reset_button_text || defaultConfig.reset_button_text;
Â  Â  Â Â 
Â  Â  Â  const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
Â  Â  Â  const secondaryColor = config.secondary_action_color || defaultConfig.secondary_action_color;
Â  Â  Â Â 
Â  Â  Â  document.getElementById('shuffle-btn').style.background = `linear-gradient(135deg, ${primaryColor} 0%, ${primaryColor}dd 100%)`;
Â  Â  Â  document.getElementById('reset-btn').style.background = `linear-gradient(135deg, ${secondaryColor} 0%, ${secondaryColor}dd 100%)`;
Â  Â  Â Â 
Â  Â  Â  document.querySelectorAll('.control-panel, .classes-grid, .history-section').forEach(el => {
C Â  Â  Â  el.style.background = config.surface_color || defaultConfig.surface_color;
Â  Â  Â  });
Â  Â  Â Â 
Â  Â  Â  document.querySelectorAll('.grid-header h2, .history-header h3, .class-number').forEach(el => {
Â  Â  Â  Â  el.style.color = config.text_color || defaultConfig.text_color;
Â  Â  Â  });
Â  Â  }

Â  Â  // --- å…¨æ–°çš„ init å‡½æ•¸ ---
Â  Â  async function init() {
Â  Â  Â  updateClasses();
Â  Â  Â  renderClassGrid();
Â  Â  Â Â 
Â  Â  Â  document.getElementById('grade-select').addEventListener('change', (e) => {
Â  Â  Â  Â  currentGrade = parseInt(e.target.value);
Â  Â  Â  Â  updateClasses();
Â  Â  Â  Â  renderClassGrid();
Â  Â  Â  });
Â  Â  Â Â 
Â  Â  Â  document.getElementById('class-count').addEventListener('change', (e) => {
Â  Â  Â  Â  let value = parseInt(e.target.value);
Â  Â  Â  Â  if (value < 1) value = 1;
Â  Â  Â  Â  if (value > 20) value = 20;
Â  Â  Â  Â  e.target.value = value;
Â  Â  Â  Â  currentClassCount = value;
Â  Â  Â  Â  updateClasses();
Â  Â  Â  Â  renderClassGrid();
Â  Â  Â  });
Â  Â  Â Â 
Â  Â  Â  document.getElementById('shuffle-btn').onclick = handleShuffle;
Â  Â  Â  document.getElementById('reset-btn').onclick = handleReset;
Â  Â  Â Â 
Â  Â  Â  // 1. å¾ localStorage è®€å–å„²å­˜çš„ç´€éŒ„
Â  Â  Â  const savedData = localStorage.getItem('shuffleHistory');
Â  Â  Â  if (savedData) {
Â  Â  Â  Â  allRecords = JSON.parse(savedData);
Â  Â  Â  } else {
Â  Â  Â  Â  allRecords = []; // å¦‚æœæ²’æœ‰å„²å­˜éï¼Œå°±å»ºç«‹ä¸€å€‹ç©ºé™£åˆ—
Â  Â  Â  }
Â  Â  Â  // 2. è®€å–å¾Œï¼Œç›´æ¥æ¸²æŸ“æ­·å²ç´€éŒ„
Â  Â  Â  renderHistory(allRecords);
Â  Â  Â Â 
Â  Â  Â  // æª¢æŸ¥ window.elementSdk æ˜¯å¦å­˜åœ¨ (Canvaç’°å¢ƒ)
Â  Â  Â  if (window.elementSdk) {
Â  Â  Â  Â  window.elementSdk.init({
Â  Â  Â  Â  Â  defaultConfig,
Â  Â  Â  Â  Â  onConfigChange,
Â  Â  Â  Â  Â  mapToCapabilities: (config) => ({
Â  Â  Â  Â  Â  Â  recolorables: [
Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  get: () => config.background_color || defaultConfig.background_color,
Â  Â  Â  Â  Â  Â  Â  Â  set: (value) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  config.background_color = value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  window.elementSdk.setConfig({ background_color: value });
Â  Â  Â  Â  _x000D_ Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  get: () => config.surface_color || defaultConfig.surface_color,
Â  Â  Â  Â  Â  Â  Â  Â  set: (value) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  config.surface_color = value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  window.elementSdk.setConfig({ surface_color: value });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  _x000D_ Â  get: () => config.text_color || defaultConfig.text_color,
Â  Â  Â  _x000D_ Â  Â  Â  Â  Â  set: (value) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  config.text_color = value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  window.elementSdk.setConfig({ text_color: value });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  get: () => config.primary_action_color || defaultConfig.primary_action_color,
Â  Â  Â  Â  Â  Â  Â  Â  set: (value) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  config.primary_action_color = value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  window.elementSdk.setConfig({ primary_action_color: value });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
Â  Â  Â  Â  Â  Â  Â  Â  set: (value) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  config.secondary_action_color = value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  window.elementSdk.setConfig({ secondary_action_color: value });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  }
Â  _x000D_ Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  borderables: [],
Â  Â  Â  Â  Â  Â  fontEditable: {
Â  Â  Â  Â  Â  Â  Â  get: () => config.font_family || defaultConfig.font_family,
Â  Â  Â  Â  Â  Â  Â  set: (value) => {
Â  Â  Â  Â  Â  Â  Â  Â  config.font_family = value;
Â  Â  Â  Â  Â  Â  Â  Â  window.elementSdk.setConfig({ font_family: value });
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  fontSizeable: {
Â  Â  Â  Â  Â  Â  Â  get: () => config.font_size || defaultConfig.font_size,
Â  Â  Â  Â  Â  Â  Â  set: (value) => {
Â  Â  Â  Â  Â  Â  Â  Â  config.font_size = value;
Â  S Â  Â  Â  Â  Â  Â  Â  window.elementSdk.setConfig({ font_size: value });
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  }),
Â  Â  Â  Â  Â  mapToEditPanelValues: (config) => new Map([
Show Â  Â  Â  Â  Â  ['main_title', config.main_title || defaultConfig.main_title],
Â  Â  Â  Â  Â  Â  ['subtitle', config.subtitle || defaultConfig.subtitle],
Â  Â  Â  Â  Â  Â  ['shuffle_button_text', config.shuffle_button_text || defaultConfig.shuffle_button_text],
Â  Â  Â  Â  Â  Â  ['reset_button_text', config.reset_button_text || defaultConfig.reset_button_text]
Â  Â  Â  Â  Â  ])
Â  Â  Â  Â  });
Â  Â  Â  } else {
Â  Â  Â  Â  // å¦‚æœ elementSdk ä¸åœ¨ (ä¾‹å¦‚åœ¨ GitHub Pages)ï¼Œ
U Â  Â  Â  // å°±æ‰‹å‹•å‘¼å«ä¸€æ¬¡ onConfigChange ä¾†å¥—ç”¨é è¨­æ¨£å¼
Â  Â  Â  Â  onConfigChange(defaultConfig);
Â  Â  Â  }
Â  Â  }

Â  Â  init();
Â  </script>
Â <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99d3a6dd171d4a86',t:'MTc2MjkyNTU3OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
